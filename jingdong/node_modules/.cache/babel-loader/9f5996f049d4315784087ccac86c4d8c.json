{"remainingRequest":"C:\\Users\\922939\\Desktop\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\922939\\Desktop\\jingdong\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\922939\\Desktop\\jingdong\\src\\effects\\catEffects.js","dependencies":[{"path":"C:\\Users\\922939\\Desktop\\jingdong\\src\\effects\\catEffects.js","mtime":1645599073983},{"path":"C:\\Users\\922939\\Desktop\\jingdong\\babel.config.js","mtime":1634821351187},{"path":"C:\\Users\\922939\\Desktop\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\922939\\Desktop\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\922939\\Desktop\\jingdong\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgdG9SZWZzLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7IC8vIOi0reeJqei9puebuOWFs+mAu+i+kQoKZXhwb3J0IHZhciB1c2VDb21tb25DYXJ0RWZmZWN0ID0gZnVuY3Rpb24gdXNlQ29tbW9uQ2FydEVmZmVjdChzaG9wSWQpIHsKICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwoKICB2YXIgX3RvUmVmcyA9IHRvUmVmcyhzdG9yZS5zdGF0ZSksCiAgICAgIGNhcnRMaXN0ID0gX3RvUmVmcy5jYXJ0TGlzdDsKCiAgdmFyIGNoYW5nZUNhcnRJdGVtSW5mbyA9IGZ1bmN0aW9uIGNoYW5nZUNhcnRJdGVtSW5mbyhzaG9wSWQsIHByb2R1Y3RJZCwgcHJvZHVjdEluZm8sIG51bSkgewogICAgc3RvcmUuY29tbWl0KCdjaGFuZ2VDYXJ0SXRlbUluZm8nLCB7CiAgICAgIHNob3BJZDogc2hvcElkLAogICAgICBwcm9kdWN0SWQ6IHByb2R1Y3RJZCwKICAgICAgcHJvZHVjdEluZm86IHByb2R1Y3RJbmZvLAogICAgICBudW06IG51bQogICAgfSk7CiAgfTsKCiAgdmFyIHByb2R1Y3RMaXN0ID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF9jYXJ0TGlzdCRfb2JqZWN0JGNhcjsKCiAgICB2YXIgcHJvZHVjdExpc3QgPSAoKF9jYXJ0TGlzdCRfb2JqZWN0JGNhciA9IGNhcnRMaXN0Ll9vYmplY3QuY2FydExpc3QpID09PSBudWxsIHx8IF9jYXJ0TGlzdCRfb2JqZWN0JGNhciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JF9vYmplY3QkY2FyW3Nob3BJZF0ucHJvZHVjdExpc3QpIHx8IHt9OwogICAgdmFyIG5vdEVtcHR5UHJvZHVjdExpc3QgPSB7fTsKCiAgICBmb3IgKHZhciBpIGluIHByb2R1Y3RMaXN0KSB7CiAgICAgIHZhciBwcm9kdWN0ID0gcHJvZHVjdExpc3RbaV07CgogICAgICBpZiAocHJvZHVjdC5jb3VudCA+IDApIHsKICAgICAgICBub3RFbXB0eVByb2R1Y3RMaXN0W2ldID0gcHJvZHVjdDsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBub3RFbXB0eVByb2R1Y3RMaXN0OwogIH0pOwogIHZhciBjYWxjdWxhdGlvbnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgcHJvZHVjdExpc3QgPSBjYXJ0TGlzdC5fb2JqZWN0LmNhcnRMaXN0W3Nob3BJZF0ucHJvZHVjdExpc3Q7CiAgICB2YXIgcmVzdWx0ID0gewogICAgICB0b3RhbDogMCwKICAgICAgcHJpY2U6IDAsCiAgICAgIGFsbENoZWNrZWQ6IHRydWUKICAgIH07CgogICAgaWYgKHByb2R1Y3RMaXN0KSB7CiAgICAgIGZvciAodmFyIGkgaW4gcHJvZHVjdExpc3QpIHsKICAgICAgICB2YXIgcHJvZHVjdCA9IHByb2R1Y3RMaXN0W2ldOwogICAgICAgIHJlc3VsdC50b3RhbCArPSBwcm9kdWN0LmNvdW50OwoKICAgICAgICBpZiAocHJvZHVjdC5jaGVjaykgewogICAgICAgICAgcmVzdWx0LnByaWNlICs9IHByb2R1Y3QuY291bnQgKiBwcm9kdWN0LnByaWNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHByb2R1Y3QuY291bnQgPiAwICYmICFwcm9kdWN0LmNoZWNrKSB7CiAgICAgICAgICByZXN1bHQuYWxsQ2hlY2tlZCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJlc3VsdC5wcmljZSA9IHJlc3VsdC5wcmljZS50b0ZpeGVkKDIpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9KTsKICB2YXIgc2hvcE5hbWUgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NhcnRMaXN0JF9vYmplY3QkY2FyMjsKCiAgICB2YXIgc2hvcE5hbWUgPSAoKF9jYXJ0TGlzdCRfb2JqZWN0JGNhcjIgPSBjYXJ0TGlzdC5fb2JqZWN0LmNhcnRMaXN0KSA9PT0gbnVsbCB8fCBfY2FydExpc3QkX29iamVjdCRjYXIyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2FydExpc3QkX29iamVjdCRjYXIyW3Nob3BJZF0uc2hvcE5hbWUpIHx8ICcnOwogICAgcmV0dXJuIHNob3BOYW1lOwogIH0pOwogIHJldHVybiB7CiAgICBjYXJ0TGlzdDogY2FydExpc3QsCiAgICBjaGFuZ2VDYXJ0SXRlbUluZm86IGNoYW5nZUNhcnRJdGVtSW5mbywKICAgIHByb2R1Y3RMaXN0OiBwcm9kdWN0TGlzdCwKICAgIHNob3BOYW1lOiBzaG9wTmFtZSwKICAgIGNhbGN1bGF0aW9uczogY2FsY3VsYXRpb25zCiAgfTsKfTs="},{"version":3,"sources":["C:/Users/922939/Desktop/jingdong/src/effects/catEffects.js"],"names":["useStore","toRefs","computed","useCommonCartEffect","shopId","store","state","cartList","changeCartItemInfo","productId","productInfo","num","commit","productList","_object","notEmptyProductList","i","product","count","calculations","result","total","price","allChecked","check","toFixed","shopName"],"mappings":"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","sourcesContent":["import { useStore } from 'vuex'\r\nimport { toRefs, computed } from 'vue'\r\n// 购物车相关逻辑\r\nexport const useCommonCartEffect = (shopId) => {\r\n  const store = useStore()\r\n  const { cartList } = toRefs(store.state)\r\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\r\n    store.commit('changeCartItemInfo', {\r\n      shopId, productId, productInfo, num\r\n    })\r\n  }\r\n  const productList = computed(() => {\r\n    const productList = cartList._object.cartList?.[shopId].productList || {}\r\n    const notEmptyProductList = {}\r\n    for (const i in productList) {\r\n      const product = productList[i]\r\n      if (product.count > 0) {\r\n        notEmptyProductList[i] = product\r\n      }\r\n    }\r\n    return notEmptyProductList\r\n  })\r\n\r\n  const calculations = computed(() => {\r\n    const productList = cartList._object.cartList[shopId].productList\r\n    const result = { total: 0, price: 0, allChecked: true }\r\n    if (productList) {\r\n      for (const i in productList) {\r\n        const product = productList[i]\r\n        result.total += product.count\r\n        if (product.check) {\r\n          result.price += (product.count * product.price)\r\n        }\r\n        if (product.count > 0 && !product.check) {\r\n          result.allChecked = false\r\n        }\r\n      }\r\n    }\r\n    result.price = result.price.toFixed(2)\r\n    return result\r\n  })\r\n\r\n  const shopName = computed(() => {\r\n    const shopName = cartList._object.cartList?.[shopId].shopName || ''\r\n    return shopName\r\n  })\r\n\r\n  return { cartList, changeCartItemInfo, productList, shopName, calculations }\r\n}\r\n"]}]}